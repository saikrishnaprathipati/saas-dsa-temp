<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/dsaLayoutLoggedIn}" th:with="currentPosition='specificStudent', currentTab='dashboard'">

<head>
	<title>Student travel expenses - add taxi</title>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
	<meta http-equiv="Pragma" content="no-cache"/>
	<meta http-equiv="Expires" content="0"/>
</head>

<body>

<div layout:fragment="content">

	<div class="ds_page__middle">
		<div class="ds_wrapper">
			<main class="ds_layout  ds_layout--article">
				<div class="ds_layout__content">
					<p><br></p>
					<form id="student_personal_details" action="#"
						  th:action="@{${ACTION_NAME}}" th:object="${addTravelExpFormVO}" method="POST">

						<div tabindex="-1" th:if="${#fields.hasAnyErrors()}" class="ds_error-summary"
							 id="error-summary" aria-labelledby="error-summary-title" role="alert">
							<h2 class="ds_error-summary__title" id="error-summary-title">There is a problem</h2>

							<ul class="ds_error-summary__list">
								<li th:each="fieldName: ${addTravelExpFormVO.orderedFields}">

										<span th:if="${#fields.hasErrors(fieldName)}">
											<span th:each="fieldError: ${#fields.errors(fieldName)}">
												<span>
													<a th:href="${'#' +  #strings.replace(fieldName,'.','_') }"
													   th:text="${fieldError}" class="field-error">
													</a>

												</span>
											</span>
										</span>
								</li>
							</ul>
						</div>

						<p>Part 2 of 3</p>
						<div class="ds_question">
							<fieldset>
								<legend>
									<h1>Add taxis</h1>
								</legend>
								<p>Provide details of the start and end location and the number of journeys you are
									claiming for.</p>
								<br>
								<div class="ds_field-group" data-module="ds-character-count"
									 th:classappend="${#fields.hasErrors('startLocationPostcode')} ? 'ds_question--error'">
									<label class="ds_label" for="startLocationPostcode">Postcode of start
										location</label>
									<p class="ds_hint-text">A journey from the student's term-time address.</p>
									<div class="ds_question__error-message"
										 th:if="${#fields.hasErrors('startLocationPostcode')}"
										 th:errors="*{startLocationPostcode}"></div>
									<input class="ds_input ds_input--fixed-10" type="text" id="startLocationPostcode"
										   maxlength="8"
										   th:classappend="${#fields.hasErrors('startLocationPostcode')} ? 'ds_input--error'"
										   th:field="*{startLocationPostcode}">
								</div>
								<br>
								<div class="ds_field-group" data-module="ds-character-count"
									 th:classappend="${#fields.hasErrors('endLocationPostcode')} ? 'ds_question--error'">
									<label class="ds_label" for="endLocationPostcode">Postcode of end
										location</label>
									<p class="ds_hint-text">A journey from the student's college, university or
										placement.</p>
									<div class="ds_question__error-message"
										 th:if="${#fields.hasErrors('endLocationPostcode')}"
										 th:errors="*{endLocationPostcode}"></div>
									<input class="ds_input ds_input--fixed-10" type="text" id="endLocationPostcode"
										   maxlength="8"
										   th:classappend="${#fields.hasErrors('endLocationPostcode')} ? 'ds_input--error'"
										   th:field="*{endLocationPostcode}">
								</div>
								<br>
								<div class="ds_field-group"
									 th:classappend="${#fields.hasErrors('returnJourneys')} ? 'ds_question--error'">
									<label class="ds_label" for="returnJourneys">Return journeys</label>
									<p class="ds_hint-text">The number of return journeys the student will make per
										week.</p>
									<div class="ds_question__error-message"
										 th:if="${#fields.hasErrors('returnJourneys')}" th:errors="*{returnJourneys}">
									</div>
									<p class="ds_hint-text">For example from home to university and back is one
										return journey.</p>
									<input class="ds_input ds_input--fixed-10" type="text" id="returnJourneys"
										   maxlength="2"
										   th:classappend="${#fields.hasErrors('returnJourneys')} ? 'ds_input--error'"
										   th:field="*{returnJourneys}">
								</div>
								<br>
								<div class="ds_field-group"
									 th:classappend="${#fields.hasErrors('weeks')} ? 'ds_question--error'">
									<label class="ds_label" for="weeks">Weeks</label>
									<p>The number of weeks return journeys will be made per academic year.</p>
									<div class="ds_question__error-message" th:if="${#fields.hasErrors('weeks')}"
										 th:errors="*{weeks}"></div>

									<div class="ds_select-wrapper ds_input--fixed-10">
										<select th:field="*{weeks}"
												class="ds_select ds_input--fixed-10 js-has-tracking-event" id="weeks"
												th:classappend="${#fields.hasErrors('weeks')} ? 'ds_input--error'">

											<option th:each="i : ${#numbers.sequence(0, 52)}" th:value="${i}"
													th:text="${i == 0 ? '' : i}">
											</option>
										</select>

										<span class="ds_select-arrow" aria-hidden="true"></span>
									</div>
								</div>
								<br>
								<div class="ds_warning-text ds_warning-text-new ds_important-text">
									<strong class="ds_warning-text__icon" aria-hidden="true"></strong>
									<strong>Important</strong>
									<div class="ds_warning-text__text">
										To process a claim for taxi costs, we need 2 separate quotes from local
										taxi providers <strong>or</strong> 1 quote from your university or college
										approved contract
										provider. We may ask you to provide evidence when processing the award.
									</div>
								</div>
								<br>
								<table class="ds_table dsa_allowance_table" data-smallscreen="scrolling"
									   style="width:70%"
									   th:if="${addTravelExpFormVO.taxiProviderList ne null && addTravelExpFormVO.taxiProviderList.size != 0}">
									<thead>
									<tr>
										<th>
											<strong>Recommended provider</strong>
										</th>
										<th>
											<strong>Contract</strong>
										</th>
										<th>
											<strong>Cost per return journey</strong>
										</th>
									</tr>
									</thead>
									<tbody>
									<tr th:each="row, rowStat :  *{taxiProviderList}">
										<td th:text="${row.recommendedProvider}"></td>
										<td th:text="${row.approvedContractor}"></td>
										<td th:text="${row.costStr}"></td>
										<td>
											<form action="#" th:action="@{/removeTaxiProvider}"
												  th:object="${removeTaxiProviderFormVO}" method="POST">

												<button class="ds_link ds_no-margin secondary_form" name="action"
														value="REMOVE_PROVIDER"
														data-button="about-student">Remove
												</button>

												<input type="hidden" name="taxiProviderToRemove.id"
													   th:value="${row.id}"/>
												<input type="hidden" name="taxiProviderToRemove.recommendedProvider"
													   th:value="${row.recommendedProvider}"/>
												<input type="hidden" name="taxiProviderToRemove.approvedContractor"
													   th:value="${row.approvedContractor}"/>
												<input type="hidden" name="taxiProviderToRemove.cost"
													   th:value="${row.cost}"/>
												<input type="hidden" th:value="${studentReferenceNumber}"
													   name="studentReferenceNumber"/>
												<input type="hidden" th:value="${dsaApplicationNumber}"
													   name="dsaApplicationNumber"/>
											</form>
										</td>
									</tr>
									</tbody>
								</table>


								<div th:if="${HIDE_ADD_PROVIDOR_PANEL eq false}">
									<div id="panelValidation"
										 th:classappend="${#fields.hasErrors('panelValidation')} ? 'ds_question--error'">

										<div class="ds_field-group" data-module="ds-character-count"
											 th:classappend="${#fields.hasErrors('taxiProvider.recommendedProvider')} ? 'ds_question--error'">
											<label class="ds_label" for="taxiProvider_recommendedProvider">Recommended
												provider</label>
											<p class="ds_hint-text">The taxi company being used for travel.</p>
											<div class="ds_question__error-message"
												 th:if="${#fields.hasErrors('taxiProvider.recommendedProvider')}"
												 th:errors="*{taxiProvider.recommendedProvider}"></div>
											<input class="ds_input ds_input--fixed-30" type="text"
												   id="taxiProvider_recommendedProvider" maxlength="50"
												   th:classappend="${#fields.hasErrors('taxiProvider.recommendedProvider')} ? 'ds_input--error'"
												   th:field="*{taxiProvider.recommendedProvider}">
										</div>
										<fieldset
												th:classappend="${#fields.hasErrors('taxiProvider.approvedContractor')} ? 'ds_question--error'">
											<legend class="ds_label">Is this a university or college approved contract
												provider?
											</legend>
											<ul class="contract-ul">
												<li class="ds_radio ds_site-items__item">
													<input class="ds_radio__input" id="taxiProvider_approvedContractor"
														   type="radio" name="radios"
														   th:field="*{taxiProvider.approvedContractor}" value="Yes"
														   data-form="radio-radios-yes">
													<label class="ds_radio__label"
														   for="taxiProvider_approvedContractor">Yes</label>
												</li>
												<li class="ds_radio ds_site-items__item">
													<input class="ds_radio__input" id="taxiProvider_no" type="radio"
														   name="radios" th:field="*{taxiProvider.approvedContractor}"
														   value="No" data-form="radio-radios-no">
													<label class="ds_radio__label" for="taxiProvider_no">No</label>
												</li>
											</ul>
										</fieldset>


										<div class="ds_field-group"
											 th:classappend="${#fields.hasErrors('taxiProvider.cost')} ? 'ds_question--error'">
											<label class="ds_label" for="taxiProvider_cost">Cost per return journey</label>
											<p class="ds_hint-text">Including VAT.</p>
											<div class="ds_question__error-message"
												 th:if="${#fields.hasErrors('taxiProvider.cost')}"
												 th:errors="*{taxiProvider.cost}"></div>

											<div class="ds_currency-wrapper" data-symbol="Â£">
												<input class="ds_input ds_input--fixed-10" type="text"
													   id="taxiProvider_cost" maxlength="8"
													   th:classappend="${#fields.hasErrors('taxiProvider.cost')} ? 'ds_input--error'"
													   data-form="textinput-total" th:field="*{taxiProvider.cost}">
											</div>
										</div>
										<div class="ds_button-group">
											<button class="ds_button ds_button--secondary" name="action"
													value="ADD_TAXI_ACTION" data-button="button-add">
												Add
											</button>
										</div>
									</div>
								</div>

								<input type="hidden" th:value="${studentReferenceNumber}"
									   name="studentReferenceNumber"/>
								<input type="hidden" th:value="${dsaApplicationNumber}" name="dsaApplicationNumber"/>


							</fieldset>
						</div>
						<div class="ds_button-group">
							<div class="ds_button-group">
								<button class="ds_button ds_button--cancel" name="action"
										th:value="${BACK_ACTION}" data-button="about-student">Back
								</button>&nbsp;&nbsp;&nbsp;&nbsp;

								<button class="ds_button  ds_no-margin" name="action" value="SAVE_TAXI_ACTION"
										data-button="about-student">Save and
									continue
								</button>
							</div>

						</div>
					</form>
				</div>
			</main>
		</div>
	</div>


</div>

</body>

</html>